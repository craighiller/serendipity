{% extends "views/base.html" %}
{% block body %}
  <h2> Wish by <a href="/user?id={{wish.user_key}}">{{wish.user_key}}</a></h2>
  <table>
      {% for i in range(8) %}
        <tr>
          {% if i == 8 %}
            {% if wish.status != 'requested' %}
              <th> Fulfiller </th>
              <th><a href="/user?id={{wish.user_fulfiller_key}}">{{wish.user_fulfiller_key}}</a>
            {% endif %}
          {% else %}
            <th>{{['Type of Request', 'Tagline', 'Detail', 'Time of Request', 'Location', 'Status', 'Fulfiller'][i]}}</th>
            <th>{{[wish.type_of_request, wish.tagline, wish.details, wish.time(), wish.location, wish.status.capitalize()][i]}}</th> 
          {% endif %}
      {% endfor %}
  </table>

  {% if wish.status == 'requested' %}
        <form method="post">
          <input name="key" type="hidden" value="{{wish.key()}}" />
          <button class='btn btn-success'>Fulfill This Wish</button>
        </form>
      {% elif wish.status == 'in progress' and wish.user_key == session['user_name'] %}
        <form method="post">
          <input name="confirm" type="hidden" value="yes" />
          <input name="key" type="hidden" value="{{wish.key()}}" />
          <button name=cancel class='btn btn-warning'>Mark As Fulfilled</button>
        </form>
      {% elif wish.status == 'in progress' and wish.user_fulfiller_key == session['user_name'] %}
        <form method="post">
          <input name="delete" type="hidden" value="yes" />
          <input name="key" type="hidden" value="{{wish.key()}}" />
          <button name=cancel class='btn btn-danger'>Cancel This Wish</button>
        </form>
      {% endif %}
  <!--<table class="table table-striped">
    <tr>
      <th>Requester</th>
      <th>Type of Request</th> 
      <th>Tagline</th>
      <th>Details</th> 
      <th>Time of Request</th>
      <th>Location</th>
      <th>Status</th>
      <th>Fulfiller</th>
      <th>Action</th>
    </tr>
    <tr>
      <td><a href="/user?id={{wish.user_key}}">{{wish.user_key}}</a></td>
      <td>{{wish.type_of_request}}</td>
      <td>{{wish.tagline}}</td>
      <td>{{wish.details}}</td>
      <td>{{wish.time()}}</td>
      <td>{{wish.location}}</td>
      <td>{{wish.status.capitalize()}}</td>
      {% if wish.status != 'requested' %}
        <td><a href="/user?id={{wish.user_fulfiller_key}}">{{wish.user_fulfiller_key}}</a></td>
      {% else %}
        <td></td>
      {% endif %}
      {% if wish.status == 'requested' %}
        <form method="post">
          <input name="key" type="hidden" value="{{wish.key()}}" />
          <td><button class='btn btn-success'>Fulfill This Wish</td>
        </form>
      {% elif wish.status == 'in progress' and wish.user_key == session['user_name'] %}
        <form method="post">
          <input name="confirm" type="hidden" value="yes" />
          <input name="key" type="hidden" value="{{wish.key()}}" />
          <td><button name=cancel class='btn btn-warning'>Mark As Fulfilled</td>
        </form>
      {% elif wish.status == 'in progress' and wish.user_fulfiller_key == session['user_name'] %}
        <form method="post">
          <input name="delete" type="hidden" value="yes" />
          <input name="key" type="hidden" value="{{wish.key()}}" />
          <td><button name=cancel class='btn btn-danger'>Cancel This Wish</td>
        </form>
      {% else %}
        <td></td>
      {% endif %}
    </tr>
  </table>!-->
{% endblock %}
